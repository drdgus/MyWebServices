<div class="container">

  <p>Стандартные элементы</p>
  <table>
    <tr>
      <td>
        <mat-form-field appearance="fill">
          <mat-label>Количество символов перед CUT</mat-label>
          <input name="textLengthBeforeCut" matInput [(ngModel)]="userSettings.textLengthBeforeCut">
        </mat-form-field>
      </td>

      <td>
        <mat-form-field appearance="fill">
          <mat-label>CUT</mat-label>
          <input name="cutElement" matInput [(ngModel)]="userSettings.cutElement">
        </mat-form-field>
      </td>

      <td>
        <mat-form-field appearance="fill">
          <mat-label>Абзац</mat-label>
          <input name="paragraphElement" matInput [(ngModel)]="userSettings.paragraphElement">
        </mat-form-field>
      </td>

      <td>
        <mat-form-field appearance="fill">
          <mat-label>Класс для абзацев по центру</mat-label>
          <input name="paragraphCenterAlignClass" matInput [(ngModel)]="userSettings.paragraphCenterAlignClass">
        </mat-form-field>
      </td>
    </tr>
    <tr>
      <td>
        <mat-form-field appearance="fill">
          <mat-label>Нумерованный\маркированный список</mat-label>
          <input name="listElement" matInput [(ngModel)]="userSettings.listElement">
        </mat-form-field>
      </td>
    </tr>
  </table>

  <div>
    <span>Общие элементы для всех шаблонов</span>
    <button class="btn btn-outline-success" (click)="addSharedElement()">Добавить</button>

    <app-customElements [customElements]="userSettings.sharedCustomUserElements" (elementChange)="elementChanged($event, -1)"></app-customElements>
  </div>

  <div>
    <span>Шаблоны</span>

    <select class="form-select" [(ngModel)]="selectedPatternId" (change)="onPatternChange()">
      <option *ngFor="let userPattern of userSettings.userPatterns" [value]="userPattern.id">{{userPattern.name}}</option>
    </select>

    <div class="mt-1">
      <span>Кастомные элементы для шаблона</span>
      <button class="btn btn-outline-success" (click)="addElementForPattern()">Добавить</button>

      <app-customElements [customElements]="selectedPattern.customUserElementsForPattern" (elementChange)="elementChanged($event, selectedPatternId)"></app-customElements>
    </div>
  </div>

  <p class="alert-info mt-2">Кастомные элементы из шаблона имеют приоритет над общими элементами.</p>

  <button class="btn btn-primary" (click)="saveSettings()">Save settings</button>
</div>
